
require 'rubygems'
require 'em-mqtt'
require 'sinatra/base'
require 'thin'


EM.run do
  # class App < Sinatra::Base
  #   # Sinatra code here
  # end

  EventMachine::MQTT::ClientConnection.connect({:username => "scrubber", :password => "scrubber", :remote_host => '127.0.0.1',  :remote_port => 8882},) do |c|
    p "subscribing to /locations/#"
    c.subscribe('/locations/#')
    c.receive_caallback do |message|
      p message
    end
  end

  # Thin::Server.start App, '0.0.0.0', 8080
end
